{
    "sourceFile": "src/main/java/es/ies/puerto/modelo/db/services/UsuarioServicio.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1745912777800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1745912807983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,112 @@\n package es.ies.puerto.modelo.db.services;\n \n-public class UsuarioServicio {\n+import es.ies.puerto.abstractas.DBConnection;\n+import es.ies.puerto.modelo.db.entidades.Usuario;\n \n-}\n+import java.sql.*;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class UsuarioService extends DBConnection {\n+\n+    public boolean crearUsuario(Usuario usuario) {\n+        String sql = \"INSERT INTO usuarios (id_usuario, nombre, email, telefono, fecha_registro) VALUES (?, ?, ?, ?, ?)\";\n+        Connection conn = null;\n+        try {\n+            conn = getConnection();\n+            PreparedStatement pstmt = conn.prepareStatement(sql);\n+            pstmt.setString(1, usuario.getIdUsuario());\n+            pstmt.setString(2, usuario.getNombre());\n+            pstmt.setString(3, usuario.getEmail());\n+            pstmt.setString(4, usuario.getTelefono());\n+            pstmt.setString(5, usuario.getFechaRegistro() != null ? getSdf().format(usuario.getFechaRegistro()) : null);\n+            return pstmt.executeUpdate() > 0;\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+            return false;\n+        } finally {\n+            cerrarConnection(conn);\n+        }\n+    }\n+\n+    public List<Usuario> obtenerTodosUsuarios() {\n+        List<Usuario> usuarios = new ArrayList<>();\n+        String sql = \"SELECT * FROM usuarios\";\n+        Connection conn = null;\n+        try {\n+            conn = getConnection();\n+            Statement stmt = conn.createStatement();\n+            ResultSet rs = stmt.executeQuery(sql);\n+\n+            while (rs.next()) {\n+                usuarios.add(new Usuario(rs));\n+            }\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        } finally {\n+            cerrarConnection(conn);\n+        }\n+        return usuarios;\n+    }\n+\n+    public Usuario obtenerUsuarioPorId(String idUsuario) {\n+        String sql = \"SELECT * FROM usuarios WHERE id_usuario = ?\";\n+        Usuario usuario = null;\n+        Connection conn = null;\n+        try {\n+            conn = getConnection();\n+            PreparedStatement pstmt = conn.prepareStatement(sql);\n+            pstmt.setString(1, idUsuario);\n+\n+            ResultSet rs = pstmt.executeQuery();\n+            if (rs.next()) {\n+                usuario = new Usuario(rs);\n+            }\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        } finally {\n+            cerrarConnection(conn);\n+        }\n+        return usuario;\n+    }\n+\n+    public boolean actualizarUsuario(Usuario usuario) {\n+        String sql = \"UPDATE usuarios SET nombre = ?, email = ?, telefono = ?, fecha_registro = ? WHERE id_usuario = ?\";\n+        Connection conn = null;\n+        try {\n+            conn = getConnection();\n+            PreparedStatement pstmt = conn.prepareStatement(sql);\n+            pstmt.setString(1, usuario.getNombre());\n+            pstmt.setString(2, usuario.getEmail());\n+            pstmt.setString(3, usuario.getTelefono());\n+            pstmt.setString(4, usuario.getFechaRegistro() != null ? getSdf().format(usuario.getFechaRegistro()) : null);\n+            pstmt.setString(5, usuario.getIdUsuario());\n+            return pstmt.executeUpdate() > 0;\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+            return false;\n+        } finally {\n+            cerrarConnection(conn);\n+        }\n+    }\n+\n+    public boolean eliminarUsuario(String idUsuario) {\n+        String sql = \"DELETE FROM usuarios WHERE id_usuario = ?\";\n+        Connection conn = null;\n+        try {\n+            conn = getConnection();\n+            PreparedStatement pstmt = conn.prepareStatement(sql);\n+            pstmt.setString(1, idUsuario);\n+            return pstmt.executeUpdate() > 0;\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+            return false;\n+        } finally {\n+            cerrarConnection(conn);\n+        }\n+    }\n+\n+    private SimpleDateFormat getSdf() {\n+        return new SimpleDateFormat(\"yyyy-MM-dd\");\n+    }\n"
                }
            ],
            "date": 1745912777800,
            "name": "Commit-0",
            "content": "package es.ies.puerto.modelo.db.services;\n\npublic class UsuarioServicio {\n\n}\n"
        }
    ]
}